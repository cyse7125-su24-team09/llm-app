# CVE Analysis LLM-App

CVE Analysis LLM-App is an advanced natural language processing application designed to assist with the querying and analysis of Common Vulnerabilities and Exposures (CVEs). It processes user queries, converts them into embeddings, performs a similarity search on CVE data vectors stored in Elasticsearch, and then generates a detailed response using the Google/Gemma2-9B model via Ollama. The app is part of a broader CVE processing and analysis application.

## Features

- **CVE Query Processing:** Converts user queries related to CVEs into embeddings using a pre-trained model.
- **Similarity Search:** Performs a similarity search on CVE data vectors stored in Elasticsearch, retrieving the most relevant CVE records.
- **CVE-Specific Response Generation:** Utilizes Google/Gemma2-9B to generate detailed responses based on the search results, tailored to CVE-related queries.
- **Comprehensive CVE Analysis:** Integrates seamlessly with our CVE processing application, offering real-time insights and responses to user queries about vulnerabilities.

## Workflow

1. **User Query:**
   - The user submits a CVE-related query to the LLM-App.
   
2. **Embedding Conversion:**
   - The query is converted into an embedding using a pre-trained model tailored for CVE-related text.
   
3. **Similarity Search:**
   - The app searches for the most relevant CVE data vectors stored in Elasticsearch, retrieving key information.
   
4. **Response Generation:**
   - The retrieved CVE data is sent to Ollama, where the Google/Gemma2-9B model generates a detailed and informative response.
   
5. **Final Response:**
   - LLM-App sends the generated CVE analysis back to the user.

## Installation

1. **Clone the Repository:**
   ```bash
   git clone https://github.com/yourusername/cve-analysis-llm-app.git
   cd cve-analysis-llm-app
   ```

2. **Install Dependencies:**
   Ensure you have Python 3.8+ installed. Install the necessary Python packages:
   ```bash
   pip install -r requirements.txt
   ```

3. **Configure Elasticsearch:**
   - Ensure your Elasticsearch cluster is set up and loaded with CVE data vectors.
   - The data should be pre-processed and stored as vectors for efficient similarity searches.

4. **Set Up Ollama :**
   - Ensure your Ollama  instance is configured to access the Google/Gemma2-9B model, optimized for CVE data analysis.

5. **Environment Variables:**
   Create a `.env` file in the root directory and configure the following variables:
   ```env
   ES_HOST_URL="<elastic_search_url>"
   ES_USERNAME="<elastic_search_username>"
   ES_PASSWORD="<elastic_search_password>"
   APP_PORT=8000
   HUGGINGFACE_TOKEN="<hugging_face_api_token>"
   ELASTICSEARCH_INDEX="cves" # or your index name
   LLM_SERVER_URL="<ollamma_api>" 
   ```

## Usage

To run the application:

```bash
python app.py
```

### Example Query

1. Start the server and send a POST request to the endpoint `/query` with your CVE-related query:
   ```bash
   curl -X POST http://localhost:8000/query -H "Content-Type: application/json" -d '{"query": "What is CVE-2024-1234?"}'
   ```

2. The app will return a detailed response generated by the Google/Gemma2-9B model based on the most relevant CVE data retrieved from Elasticsearch.

## Dependencies

- Python 3.8+
- Elasticsearch
- Ollama  API
- Google/Gemma2-9B model
- FastAPI

## Integration with CVE Processing Application

This LLM-App is designed to work seamlessly with your broader CVE processing and analysis application. Ensure that your CVE data is processed and stored in Elasticsearch to fully utilize the capabilities of this LLM-App.
